<VirtualHost *:80>
	ServerName www.example.com
	DocumentRoot /var/www/blogsum
	DirectoryIndex index.cgi

	Options +FollowSymlinks
	RewriteEngine On
	RewriteRule ^/rss.xml$ /index.cgi?rss1=true [P]
	RewriteRule ^/Tags/([^/]+)$ /index.cgi?search=$1 [P]
	RewriteRule ^/([^/]+)/([^/]+)/([^/]+)$ /index.cgi?view=article&year=$1&month=$2&uri=$3 [P]
	RewriteRule ^/([^/]+)/([^/^.]+)/?$ /index.cgi?view=article&year=$1&month=$2 [P]

	PerlModule Apache::PerlRun
	<LocationMatch ^/index.cgi>
		SetHandler perl-script
		PerlHandler Apache::PerlRun
		PerlModule strict CGI DBI DBD::SQLite HTML::Template XML::RSS Captcha::reCAPTCHA HTML::Entities HTTP::Request::Common URI::_foreign Errno Net::HTTP IO::Select Compress::Zlib Log::Agent URI::http LWP::Protocol::http Carp::Heavy
		Options ExecCGI
		PerlSendHeader Off
		Order deny,allow
		Allow from all
	</LocationMatch>
	<LocationMatch ^/admin.cgi>
		SetHandler perl-script
		PerlHandler Apache::PerlRun
		PerlModule strict CGI DBI DBD::SQLite HTML::Template
		Options ExecCGI
		PerlSendHeader On
		Order deny,allow
		Allow from all
		AuthUserFile /path/to/example.htpasswd
		AuthName "Blogsum Admin - example.com"
		AuthType Basic
		<limit GET POST>
		require valid-user
		</limit>
	</LocationMatch>
</VirtualHost>
